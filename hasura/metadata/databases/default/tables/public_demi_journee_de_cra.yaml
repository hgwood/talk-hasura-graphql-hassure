table:
  name: demi_journee_de_cra
  schema: public
object_relationships:
- name: consultant
  using:
    foreign_key_constraint_on: matricule_consultant
- name: validation
  using:
    manual_configuration:
      column_mapping:
        annee: annee
        matricule_consultant: matricule_consultant
        mois: mois
      insertion_order: null
      remote_table:
        name: validation_de_cra
        schema: public
computed_fields:
- definition:
    function:
      name: demi_journee_de_cra_cra_complet
      schema: public
  name: cra_complet
insert_permissions:
- permission:
    backend_only: false
    check:
      _not:
        _exists:
          _table:
            name: validation_de_cra
            schema: public
          _where: {}
    columns:
    - code_projet
    - date
    - demi_journee
    set:
      matricule_consultant: x-hasura-User-Id
  role: consultant
select_permissions:
- permission:
    columns:
    - matricule_consultant
    - date
    - demi_journee
    - code_projet
    - annee
    - mois
    filter:
      matricule_consultant:
        _eq: X-Hasura-User-Id
  role: consultant
- permission:
    columns:
    - date
    - annee
    - matricule_consultant
    - mois
    - code_projet
    - demi_journee
    filter:
      consultant:
        matricule_manager:
          _eq: X-Hasura-User-Id
  role: manager
update_permissions:
- permission:
    check:
      _not:
        _exists:
          _table:
            name: validation_de_cra
            schema: public
          _where: {}
    columns:
    - code_projet
    filter: {}
    set:
      matricule_consultant: x-hasura-user-id
  role: consultant
